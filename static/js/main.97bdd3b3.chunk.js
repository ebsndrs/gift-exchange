(this["webpackJsonpgift-exchange"]=this["webpackJsonpgift-exchange"]||[]).push([[0],{67:function(e,a,t){e.exports=t(77)},72:function(e,a,t){},77:function(e,a,t){"use strict";t.r(a);var n=t(0),r=t.n(n),l=t(10),o=t.n(l),u=t(11),c=t(13),i=t(12),s=t(14),m=t(129),h=t(117),d=t(118),f=t(120),g=(t(72),t(105)),p=t(109),v=t(78),E=t(110),b=t(133),M=t(114),j=t(115),O=t(116),y=t(43),k=t.n(y);function G(e){var a=Object(n.useState)(""),t=Object(s.a)(a,2),l=t[0],o=t[1],u=Object(n.useState)(!0),c=Object(s.a)(u,2),i=c[0],m=c[1],h=function(){e.addHousehold(l),o(""),m(!0)};return r.a.createElement(g.a,{subheader:r.a.createElement(p.a,null,"Households")},r.a.createElement(v.a,null,r.a.createElement(E.a,null,r.a.createElement(b.a,{label:"Add Household",onChange:function(a){return function(a){o(a.target.value);var t=a.target.value.trim(),n=""===t||e.households.some((function(e){return e===t}))||void 0===t;m(n)}(a)},onKeyUp:function(a){return function(a){13===a.keyCode&&(""!==l&&!e.households.some((function(e){return e===l}))&&void 0!==l&&(a.preventDefault(),h()))}(a)},value:l})),r.a.createElement(M.a,null,r.a.createElement(j.a,{disabled:i,variant:"contained",color:"primary",onClick:h},"Add"))),e.households.filter((function(a){return a!==e.households[0]})).map((function(a){return r.a.createElement(v.a,{key:a},r.a.createElement(O.a,null,r.a.createElement(k.a,null)),r.a.createElement(E.a,{primary:a}),r.a.createElement(M.a,null,r.a.createElement(j.a,{fullWidth:!0,variant:"contained",color:"secondary",onClick:function(){return e.removeHousehold(a)}},"Remove")))})))}var S=t(119),C=t(121),A=t(122),H=t(123),x=t(124),P=t(125),N=t(113),V=t(135),w=t(130),I=t(126),W=t(127),R=t(55),B=t.n(R);function D(e){var a=Object(n.useState)({name:"",household:e.households[0],gender:e.genders[0],age:0}),t=Object(s.a)(a,2),l=t[0],o=t[1],u=Object(n.useState)(!0),c=Object(s.a)(u,2),m=c[0],g=c[1],p=function(){e.addPerson(l),o({name:"",household:e.households[0],gender:e.genders[0],age:0}),g(!0)};return r.a.createElement(h.a,null,r.a.createElement(d.a,{title:"People",action:r.a.createElement(S.a,null,r.a.createElement(B.a,{onClick:e.resetPeople}))}),r.a.createElement(f.a,null,r.a.createElement(C.a,null,r.a.createElement(A.a,null,r.a.createElement(H.a,null,r.a.createElement(x.a,null,r.a.createElement(P.a,{style:{width:"30%"}},r.a.createElement(N.a,{fullWidth:!0},r.a.createElement(b.a,{id:"personInputName",placeholder:"Name",label:"Name",value:l.name,onChange:function(a){return function(a){o(Object(i.a)({},l,{name:a.target.value}));var t=a.target.value.trim(),n=""===t||e.people.some((function(e){return e.name===t}))||void 0===t;g(n)}(a)},onKeyUp:function(a){return function(a){13===a.keyCode&&(""!==l.name&&!e.people.some((function(e){return e.name===l.name}))&&void 0!==l.name&&(a.preventDefault(),p()))}(a)}}))),r.a.createElement(P.a,null,r.a.createElement(N.a,{fullWidth:!0},r.a.createElement(V.a,null,"Household"),r.a.createElement(w.a,{id:"personInputHousehold",value:l.household,onChange:function(e){return function(e){var a=e.target.value;a.trim(),void 0!==a&&""!==a&&o(Object(i.a)({},l,{household:a}))}(e)}},e.households.map((function(e){return r.a.createElement(I.a,{key:e,value:e},e)}))))),r.a.createElement(P.a,null,r.a.createElement(N.a,{fullWidth:!0},r.a.createElement(V.a,null,"Gender"),r.a.createElement(w.a,{id:"personInputGender",value:l.gender,onChange:function(e){return function(e){var a=e.target.value;a.trim(),void 0!==a&&""!==a&&o(Object(i.a)({},l,{gender:a}))}(e)}},e.genders.map((function(e){return r.a.createElement(I.a,{key:e,value:e},e)}))))),r.a.createElement(P.a,{style:{width:"11%"}},r.a.createElement(N.a,{fullWidth:!0},r.a.createElement(b.a,{id:"personInputAge",type:"number",placeholder:"Age",label:"Age",value:l.age,inputProps:{min:"1"}}))),r.a.createElement(P.a,null,r.a.createElement(j.a,{fullWidth:!0,variant:"contained",color:"primary",onClick:p,disabled:m},"Add"))),r.a.createElement(x.a,null,r.a.createElement(P.a,null,"Name"),r.a.createElement(P.a,null,"Household"),r.a.createElement(P.a,null,"Gender"),r.a.createElement(P.a,null,"Age"),r.a.createElement(P.a,null))),r.a.createElement(W.a,null,e.people.map((function(a){return r.a.createElement(x.a,{key:a.name},r.a.createElement(P.a,null,a.name),r.a.createElement(P.a,null,a.household),r.a.createElement(P.a,null,a.gender),r.a.createElement(P.a,null,a.age>0?a.age:"None"),r.a.createElement(P.a,null,r.a.createElement(j.a,{fullWidth:!0,variant:"contained",color:"secondary",onClick:function(){return e.removePerson(a.name)}},"Remove")))})))))))}var J=t(136),K=t(56),U=t.n(K);function F(e){return r.a.createElement(g.a,{subheader:r.a.createElement(p.a,null,"Rules")},r.a.createElement(v.a,null,r.a.createElement(O.a,null,r.a.createElement(k.a,null)),r.a.createElement(E.a,{id:"switch-list-label-preventSameHousehold",primary:"Prevent Same Household"}),r.a.createElement(M.a,null,r.a.createElement(J.a,{edge:"end",onChange:function(a){return e.changeRule("preventSameHousehold",a.target.checked)},checked:e.rules.preventSameHousehold}))),r.a.createElement(v.a,null,r.a.createElement(O.a,null,r.a.createElement(U.a,null)),r.a.createElement(E.a,{id:"switch-list-label-preventSameGender",primary:"Prevent Same Gender"}),r.a.createElement(M.a,null,r.a.createElement(J.a,{edge:"end",onChange:function(a){return e.changeRule("preventSameGender",a.target.checked)},checked:e.rules.preventSameGender}))))}var T=t(132),q=t(128),z=t(23),L=t(57),Q=t.n(L);function X(e){return r.a.createElement(h.a,null,r.a.createElement(d.a,{title:"Matches",action:r.a.createElement(S.a,null,r.a.createElement(Q.a,{onClick:e.regenerateMatches}))}),e.areMatchesGenerating?r.a.createElement(T.a,{justifyContent:"center"},r.a.createElement(q.a,null)):e.areMatchesValid?r.a.createElement(C.a,null,r.a.createElement(A.a,null,r.a.createElement(H.a,null,r.a.createElement(x.a,null,r.a.createElement(P.a,null,"Gifter"),r.a.createElement(P.a,null,"Giftee"))),r.a.createElement(W.a,null,e.matches.map((function(e,a){return r.a.createElement(x.a,{key:a},r.a.createElement(P.a,null,e.gifter.name),r.a.createElement(P.a,null,e.giftee.name))}))))):r.a.createElement(T.a,{textAlign:"center",m:3},r.a.createElement(z.a,null,e.matchesMessage)))}var Y=t(42),Z=t(21),$=function(){function e(a){Object(Y.a)(this,e),this.genders=void 0,this.genders=a}return Object(Z.a)(e,[{key:"generateMatches",value:function(e,a){for(var t=[],n=0;n<e.length;n++)for(var r=e[n],l=0;l<e.length;l++){var o=e[l];if(a[n][l]>0&&a[l][n]>0){t.push({gifter:r,giftee:o}),a[n][l]=0,a[l][n]=0;for(var u=0;u<a[n].length;u++)a[n][u]=0,a[u][n]=0}}if(t.length<e.length){var c=e[e.length-1],i=e[0];t.push({gifter:c,giftee:i})}return t}},{key:"areMatchesValid",value:function(e,a,t,n){var r=this,l=!0;if(a.length!==e)l=!1;else for(var o=function(e){var o=a[e];return o.gifter.name===o.giftee.name?(l=!1,"break"):a.filter((function(e){return e.gifter.name===o.gifter.name})).length>1?(l=!1,"break"):a.filter((function(e){return e.giftee.name===o.giftee.name})).length>1?(l=!1,"break"):(n.preventCircularGifting,(!n.preventSameHousehold||o.gifter.household===t[0]&&o.giftee.household===t[0]||o.gifter.household!==o.giftee.household)&&(!n.preventSameGender||o.gifter.gender===r.genders[0]&&o.giftee.gender===r.genders[0]||o.gifter.gender!==o.giftee.gender)?void n.preventSameAgeGroup:(l=!1,"break"))},u=0;u<a.length;u++){if("break"===o(u))break}return l}},{key:"buildAdjacencyMatrix",value:function(e,a,t){for(var n=[],r=0;r<e.length;r++){n.push([]);for(var l=0;l<e.length;l++)n[r].push(0)}for(var o=0;o<e.length;o++)for(var u=e[o],c=0;c<e.length;c++){var i=e[c],s=!0;u.name===i.name&&(s=!1),t.preventCircularGifting,t.preventSameHousehold&&(u.household===a[0]&&i.household===a[0]||u.household===i.household&&(s=!1)),t.preventSameGender&&(u.gender===this.genders[0]&&i.gender===this.genders[0]||u.gender===i.gender&&(s=!1)),t.preventSameAgeGroup,s&&(n[o][c]++,n[c][o]++)}return n}},{key:"shufflePeople",value:function(e){for(var a=Object(u.a)(e),t=a.length-1;t>0;t--){var n=Math.floor(Math.random()*(t+1)),r=[a[n],a[t]];a[t]=r[0],a[n]=r[1]}return a}},{key:"bipartiteMatching",value:function(e,a,t,n,r,l){for(var o=0;o<a;o++)if(t[n][o]>0&&!r[o]&&(r[o]=!0,l[o]<0||this.bipartiteMatching(e,a,t,l[o],r,l)))return l[o]=n,!0;return!1}},{key:"maximumBipartiteMatching",value:function(e,a,t){for(var n=Array(t),r=0;r<t;++r)n[r]=-1;for(var l=0,o=0;o<a;o++){for(var u=Array(t),c=0;c<t;++c)u[c]=!1;this.bipartiteMatching(a,t,e,o,u,n)&&l++}return l}}]),e}();o.a.render(r.a.createElement((function(){var e=["None","Male","Female","Other"],a=new $(e),t=Object(n.useState)({rules:{preventCircularGifting:!1,preventSameHousehold:!1,preventSameGender:!1,preventSameAgeGroup:!1},people:[],households:["None"],matches:[],areMatchesGenerating:!1,areMatchesValid:!1,matchesMessage:""}),l=Object(s.a)(t,2),o=l[0],g=l[1],p=function(){if(o.people.length<2)g(Object(i.a)({},o,{areMatchesValid:!1,matchesMessage:"Add 2 or more people to start matching."}));else{g(Object(i.a)({},o,{areMatchesGenerating:!0}));var e=a.shufflePeople(o.people),t=a.buildAdjacencyMatrix(e,o.households,o.rules);if(a.maximumBipartiteMatching(t,o.people.length,o.people.length)===o.people.length){for(var n=a.generateMatches(e,t);!a.areMatchesValid(o.people.length,n,o.households,o.rules);)e=a.shufflePeople(o.people),t=a.buildAdjacencyMatrix(e,o.households,o.rules),n=a.generateMatches(e,t);n.sort((function(e,a){return e.gifter.name.localeCompare(a.gifter.name)})),g(Object(i.a)({},o,{matches:n,areMatchesGenerating:!1,areMatchesValid:!0}))}else g(Object(i.a)({},o,{matches:[],areMatchesGenerating:!1,areMatchesValid:!1,matchesMessage:"No matches could be made with your current settings. Try changing something."}))}};return Object(n.useEffect)(p,[o.people,o.households,o.rules]),r.a.createElement("div",{className:"app"},r.a.createElement(m.a,{container:!0,spacing:3},r.a.createElement(m.a,{item:!0,xs:12,md:3},r.a.createElement(h.a,null,r.a.createElement(d.a,{title:"Setup"}),r.a.createElement(f.a,null,r.a.createElement(F,{rules:o.rules,changeRule:function(e,a){g(Object(i.a)({},o,{rules:Object(i.a)({},o.rules,Object(c.a)({},e,a))}))}}),r.a.createElement(G,{households:o.households,addHousehold:function(e){e.trim(),void 0!==e&&""!==e&&!o.households.includes(e)&&g(Object(i.a)({},o,{households:[].concat(Object(u.a)(o.households),[e])}))},removeHousehold:function(e){var a=o.households.findIndex((function(a){return a===e}));0!==a&&void 0!==o.households[a]&&(o.people.filter((function(e){return e.household===o.households[a]})).forEach((function(e){e.household=o.households[0]})),o.households.splice(a,1),g(Object(i.a)({},o,{people:Object(u.a)(o.people),households:Object(u.a)(o.households)})))}})))),r.a.createElement(m.a,{item:!0,xs:12,md:6},r.a.createElement(D,{people:o.people,households:o.households,genders:e,addPerson:function(e){var a,t;e.name.trim(),null===(a=e.household)||void 0===a||a.trim(),null===(t=e.gender)||void 0===t||t.trim(),void 0!==e.name&&""!==e.name&&!o.people.some((function(a){return a.name===e.name}))&&g(Object(i.a)({},o,{people:[].concat(Object(u.a)(o.people),[e])}))},removePerson:function(e){var a=o.people.findIndex((function(a){return a.name===e}));void 0!==o.people[a]&&(o.people.splice(a,1),g(Object(i.a)({},o,{people:Object(u.a)(o.people)})))},resetPeople:function(){g(Object(i.a)({},o,{people:[]}))}})),r.a.createElement(m.a,{item:!0,xs:12,md:3},r.a.createElement(X,{matches:o.matches,areMatchesGenerating:o.areMatchesGenerating,areMatchesValid:o.areMatchesValid,matchesMessage:o.matchesMessage,regenerateMatches:p}))))}),null),document.getElementById("root"))}},[[67,1,2]]]);
//# sourceMappingURL=main.97bdd3b3.chunk.js.map