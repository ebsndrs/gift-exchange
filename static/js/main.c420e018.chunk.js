(this["webpackJsonpsecret-santa"]=this["webpackJsonpsecret-santa"]||[]).push([[0],{67:function(e,a,t){e.exports=t(77)},72:function(e,a,t){},77:function(e,a,t){"use strict";t.r(a);var n=t(0),r=t.n(n),l=t(10),o=t.n(l),u=t(11),c=t(13),i=t(12),s=t(14),h=t(128),m=t(117),d=t(115),g=t(118),f=t(119),p=(t(72),t(105)),E=t(109),v=t(78),b=t(110),j=t(133),M=t(114),y=t(116),O=t(43),k=t.n(O);function G(e){var a=Object(n.useState)(""),t=Object(s.a)(a,2),l=t[0],o=t[1],u=Object(n.useState)(!0),c=Object(s.a)(u,2),i=c[0],h=c[1],m=function(){e.addHousehold(l),o(""),h(!0)};return r.a.createElement(p.a,{subheader:r.a.createElement(E.a,null,"Households")},r.a.createElement(v.a,null,r.a.createElement(b.a,null,r.a.createElement(j.a,{label:"Add Household",onChange:function(a){return function(a){o(a.target.value);var t=a.target.value.trim(),n=""===t||e.households.some((function(e){return e===t}))||void 0===t;h(n)}(a)},onKeyUp:function(a){return function(a){13===a.keyCode&&(""!==l&&!e.households.some((function(e){return e===l}))&&void 0!==l&&(a.preventDefault(),m()))}(a)},value:l})),r.a.createElement(M.a,null,r.a.createElement(d.a,{disabled:i,variant:"contained",color:"primary",onClick:m},"Add"))),e.households.filter((function(a){return a!==e.households[0]})).map((function(a){return r.a.createElement(v.a,{key:a},r.a.createElement(y.a,null,r.a.createElement(k.a,null)),r.a.createElement(b.a,{primary:a}),r.a.createElement(M.a,null,r.a.createElement(d.a,{fullWidth:!0,variant:"contained",color:"secondary",onClick:function(){return e.removeHousehold(a)}},"Remove")))})))}var S=t(120),C=t(121),A=t(122),H=t(123),P=t(124),x=t(113),N=t(135),w=t(129),V=t(125),R=t(126);function I(e){var a=Object(n.useState)({name:"",household:e.households[0],gender:e.genders[0],age:0}),t=Object(s.a)(a,2),l=t[0],o=t[1],u=Object(n.useState)(!0),c=Object(s.a)(u,2),h=c[0],p=c[1],E=function(){e.addPerson(l),o({name:"",household:e.households[0],gender:e.genders[0],age:0}),p(!0)};return r.a.createElement(m.a,null,r.a.createElement(g.a,{title:"People"}),r.a.createElement(f.a,null,r.a.createElement(S.a,null,r.a.createElement(C.a,null,r.a.createElement(A.a,null,r.a.createElement(H.a,null,r.a.createElement(P.a,{style:{width:"30%"}},r.a.createElement(x.a,{fullWidth:!0},r.a.createElement(j.a,{id:"personInputName",placeholder:"Name",label:"Name",value:l.name,onChange:function(a){return function(a){o(Object(i.a)({},l,{name:a.target.value}));var t=a.target.value.trim(),n=""===t||e.people.some((function(e){return e.name===t}))||void 0===t;p(n)}(a)},onKeyUp:function(a){return function(a){13===a.keyCode&&(""!==l.name&&!e.people.some((function(e){return e.name===l.name}))&&void 0!==l.name&&(a.preventDefault(),E()))}(a)}}))),r.a.createElement(P.a,null,r.a.createElement(x.a,{fullWidth:!0},r.a.createElement(N.a,null,"Household"),r.a.createElement(w.a,{id:"personInputHousehold",value:l.household,onChange:function(e){return function(e){var a=e.target.value;a.trim(),void 0!==a&&""!==a&&o(Object(i.a)({},l,{household:a}))}(e)}},e.households.map((function(e){return r.a.createElement(V.a,{key:e,value:e},e)}))))),r.a.createElement(P.a,null,r.a.createElement(x.a,{fullWidth:!0},r.a.createElement(N.a,null,"Gender"),r.a.createElement(w.a,{id:"personInputGender",value:l.gender,onChange:function(e){return function(e){var a=e.target.value;a.trim(),void 0!==a&&""!==a&&o(Object(i.a)({},l,{gender:a}))}(e)}},e.genders.map((function(e){return r.a.createElement(V.a,{key:e,value:e},e)}))))),r.a.createElement(P.a,{style:{width:"11%"}},r.a.createElement(x.a,{fullWidth:!0},r.a.createElement(j.a,{id:"personInputAge",type:"number",placeholder:"Age",label:"Age",value:l.age,inputProps:{min:"1"}}))),r.a.createElement(P.a,null,r.a.createElement(d.a,{fullWidth:!0,variant:"contained",color:"primary",onClick:E,disabled:h},"Add"))),r.a.createElement(H.a,null,r.a.createElement(P.a,null,"Name"),r.a.createElement(P.a,null,"Household"),r.a.createElement(P.a,null,"Gender"),r.a.createElement(P.a,null,"Age"),r.a.createElement(P.a,null))),r.a.createElement(R.a,null,e.people.map((function(a){return r.a.createElement(H.a,{key:a.name},r.a.createElement(P.a,null,a.name),r.a.createElement(P.a,null,a.household),r.a.createElement(P.a,null,a.gender),r.a.createElement(P.a,null,a.age>0?a.age:"None"),r.a.createElement(P.a,null,r.a.createElement(d.a,{fullWidth:!0,variant:"contained",color:"secondary",onClick:function(){return e.removePerson(a.name)}},"Remove")))})))))))}var W=t(132),T=t(56),B=t.n(T),D=t(54),J=t.n(D),K=t(55),U=t.n(K);function F(e){return r.a.createElement(p.a,{subheader:r.a.createElement(E.a,null,"Rules")},r.a.createElement(v.a,null,r.a.createElement(y.a,null,r.a.createElement(J.a,null)),r.a.createElement(b.a,{id:"switch-list-label-preventCircularGifting",primary:"Prevent Circular Gifting"}),r.a.createElement(M.a,null,r.a.createElement(W.a,{edge:"end",onChange:function(a){return e.changeRule("preventCircularGifting",a.target.checked)},checked:e.rules.preventCircularGifting}))),r.a.createElement(v.a,null,r.a.createElement(y.a,null,r.a.createElement(k.a,null)),r.a.createElement(b.a,{id:"switch-list-label-preventSameHousehold",primary:"Prevent Same Household"}),r.a.createElement(M.a,null,r.a.createElement(W.a,{edge:"end",onChange:function(a){return e.changeRule("preventSameHousehold",a.target.checked)},checked:e.rules.preventSameHousehold}))),r.a.createElement(v.a,null,r.a.createElement(y.a,null,r.a.createElement(U.a,null)),r.a.createElement(b.a,{id:"switch-list-label-preventSameGender",primary:"Prevent Same Gender"}),r.a.createElement(M.a,null,r.a.createElement(W.a,{edge:"end",onChange:function(a){return e.changeRule("preventSameGender",a.target.checked)},checked:e.rules.preventSameGender}))),r.a.createElement(v.a,null,r.a.createElement(y.a,null,r.a.createElement(B.a,null)),r.a.createElement(b.a,{id:"switch-list-label-preventSameAgeGroup",primary:"Prevent Same Age Group"}),r.a.createElement(M.a,null,r.a.createElement(W.a,{edge:"end",onChange:function(a){return e.changeRule("preventSameAgeGroup",a.target.checked)},checked:e.rules.preventSameAgeGroup}))))}var q=t(131),z=t(127),L=t(23);function Q(e){return r.a.createElement(m.a,null,r.a.createElement(g.a,{title:"Matches"}),e.areMatchesGenerating?r.a.createElement(q.a,{justifyContent:"center"},r.a.createElement(z.a,null)):e.areMatchesValid?r.a.createElement(S.a,null,r.a.createElement(C.a,null,r.a.createElement(A.a,null,r.a.createElement(H.a,null,r.a.createElement(P.a,null,"Gifter"),r.a.createElement(P.a,null,"Giftee"))),r.a.createElement(R.a,null,e.matches.map((function(e,a){return r.a.createElement(H.a,{key:a},r.a.createElement(P.a,null,e.gifter.name),r.a.createElement(P.a,null,e.giftee.name))}))))):r.a.createElement(q.a,{textAlign:"center",m:3},r.a.createElement(L.a,null,e.matchesMessage)))}var X=t(42),Y=t(21),Z=function(){function e(a){Object(X.a)(this,e),this.genders=void 0,this.genders=a}return Object(Y.a)(e,[{key:"generateMatches",value:function(e,a){for(var t=[],n=0;n<e.length;n++)for(var r=e[n],l=0;l<e.length;l++){var o=e[l];if(a[n][l]>0&&a[l][n]>0){t.push({gifter:r,giftee:o}),a[n][l]=0,a[l][n]=0;for(var u=0;u<a[n].length;u++)a[n][u]=0,a[u][n]=0}}if(t.length<e.length){var c=e[e.length-1],i=e[0];t.push({gifter:c,giftee:i})}return t}},{key:"areMatchesValid",value:function(e,a,t,n){var r=this,l=!0;if(a.length!==e)l=!1;else for(var o=function(e){var o=a[e];return o.gifter.name===o.giftee.name?(l=!1,"break"):a.filter((function(e){return e.gifter.name===o.gifter.name})).length>1?(l=!1,"break"):a.filter((function(e){return e.giftee.name===o.giftee.name})).length>1?(l=!1,"break"):(n.preventCircularGifting,(!n.preventSameHousehold||o.gifter.household===t[0]&&o.giftee.household===t[0]||o.gifter.household!==o.giftee.household)&&(!n.preventSameGender||o.gifter.gender===r.genders[0]&&o.giftee.gender===r.genders[0]||o.gifter.gender!==o.giftee.gender)?void n.preventSameAgeGroup:(l=!1,"break"))},u=0;u<a.length;u++){if("break"===o(u))break}return l}},{key:"buildAdjacencyMatrix",value:function(e,a,t){for(var n=[],r=0;r<e.length;r++){n.push([]);for(var l=0;l<e.length;l++)n[r].push(0)}for(var o=0;o<e.length;o++)for(var u=e[o],c=0;c<e.length;c++){var i=e[c],s=!0;u.name===i.name&&(s=!1),t.preventCircularGifting,t.preventSameHousehold&&(u.household===a[0]&&i.household===a[0]||u.household===i.household&&(s=!1)),t.preventSameGender&&(u.gender===this.genders[0]&&i.gender===this.genders[0]||u.gender===i.gender&&(s=!1)),t.preventSameAgeGroup,s&&(n[o][c]++,n[c][o]++)}return n}},{key:"shufflePeople",value:function(e){for(var a=Object(u.a)(e),t=a.length-1;t>0;t--){var n=Math.floor(Math.random()*(t+1)),r=[a[n],a[t]];a[t]=r[0],a[n]=r[1]}return a}},{key:"bipartiteMatching",value:function(e,a,t,n,r,l){for(var o=0;o<a;o++)if(t[n][o]>0&&!r[o]&&(r[o]=!0,l[o]<0||this.bipartiteMatching(e,a,t,l[o],r,l)))return l[o]=n,!0;return!1}},{key:"maximumBipartiteMatching",value:function(e,a,t){for(var n=Array(t),r=0;r<t;++r)n[r]=-1;for(var l=0,o=0;o<a;o++){for(var u=Array(t),c=0;c<t;++c)u[c]=!1;this.bipartiteMatching(a,t,e,o,u,n)&&l++}return l}}]),e}();o.a.render(r.a.createElement((function(){var e=["None","Male","Female","Other"],a=new Z(e),t=Object(n.useState)({rules:{preventCircularGifting:!1,preventSameHousehold:!1,preventSameGender:!1,preventSameAgeGroup:!1},people:[],households:["None"],matches:[],areMatchesGenerating:!1,areMatchesValid:!1,matchesMessage:""}),l=Object(s.a)(t,2),o=l[0],p=l[1],E=function(){if(o.people.length<2)p(Object(i.a)({},o,{areMatchesValid:!1,matchesMessage:"Add 2 or more people to start matching."}));else{p(Object(i.a)({},o,{areMatchesGenerating:!0}));var e=a.shufflePeople(o.people),t=a.buildAdjacencyMatrix(e,o.households,o.rules);if(a.maximumBipartiteMatching(t,o.people.length,o.people.length)===o.people.length){for(var n=a.generateMatches(e,t);!a.areMatchesValid(o.people.length,n,o.households,o.rules);)e=a.shufflePeople(o.people),t=a.buildAdjacencyMatrix(e,o.households,o.rules),n=a.generateMatches(e,t);n.sort((function(e,a){return e.gifter.name.localeCompare(a.gifter.name)})),p(Object(i.a)({},o,{matches:n,areMatchesGenerating:!1,areMatchesValid:!0}))}else p(Object(i.a)({},o,{matches:[],areMatchesGenerating:!1,areMatchesValid:!1,matchesMessage:"No matches could be made with your current settings. Try changing something."}))}};return Object(n.useEffect)(E,[o.people,o.households,o.rules]),r.a.createElement("div",{className:"app"},r.a.createElement(h.a,{container:!0,spacing:3},r.a.createElement(h.a,{item:!0,xs:12,md:3},r.a.createElement(m.a,null,r.a.createElement(d.a,{onClick:function(){p(Object(i.a)({},o,{households:[].concat(Object(u.a)(o.households),["Household 1"]),people:[{name:"Test 1",household:"Household 1",gender:e[0],age:0},{name:"Test 2",household:"None",gender:e[0],age:0},{name:"Test 3",household:"Household 1",gender:e[0],age:0},{name:"Test 4",household:"None",gender:e[0],age:0}]}))}},"Test Data"),r.a.createElement(d.a,{onClick:E},"Generate matches"),r.a.createElement(g.a,{title:"Setup"}),r.a.createElement(f.a,null,r.a.createElement(F,{rules:o.rules,changeRule:function(e,a){p(Object(i.a)({},o,{rules:Object(i.a)({},o.rules,Object(c.a)({},e,a))}))}}),r.a.createElement(G,{households:o.households,addHousehold:function(e){e.trim(),void 0!==e&&""!==e&&!o.households.includes(e)&&p(Object(i.a)({},o,{households:[].concat(Object(u.a)(o.households),[e])}))},removeHousehold:function(e){var a=o.households.findIndex((function(a){return a===e}));0!==a&&void 0!==o.households[a]&&(o.people.filter((function(e){return e.household===o.households[a]})).forEach((function(e){e.household=o.households[0]})),o.households.splice(a,1),p(Object(i.a)({},o,{people:Object(u.a)(o.people),households:Object(u.a)(o.households)})))}})))),r.a.createElement(h.a,{item:!0,xs:12,md:6},r.a.createElement(I,{people:o.people,households:o.households,genders:e,addPerson:function(e){var a,t;e.name.trim(),null===(a=e.household)||void 0===a||a.trim(),null===(t=e.gender)||void 0===t||t.trim(),void 0!==e.name&&""!==e.name&&!o.people.some((function(a){return a.name===e.name}))&&p(Object(i.a)({},o,{people:[].concat(Object(u.a)(o.people),[e])}))},removePerson:function(e){return function(e){var a=o.people.findIndex((function(a){return a.name===e}));void 0!==o.people[a]&&(o.people.splice(a,1),p(Object(i.a)({},o,{people:Object(u.a)(o.people)})))}(e)}})),r.a.createElement(h.a,{item:!0,xs:12,md:3},r.a.createElement(Q,{matches:o.matches,areMatchesGenerating:o.areMatchesGenerating,areMatchesValid:o.areMatchesValid,matchesMessage:o.matchesMessage}))))}),null),document.getElementById("root"))}},[[67,1,2]]]);
//# sourceMappingURL=main.c420e018.chunk.js.map