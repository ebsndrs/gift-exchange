(this["webpackJsonpgift-exchange"]=this["webpackJsonpgift-exchange"]||[]).push([[0],{69:function(e,a,t){e.exports=t(79)},74:function(e,a,t){},79:function(e,a,t){"use strict";t.r(a);var n=t(0),r=t.n(n),l=t(10),c=t.n(l),o=t(11),u=t(13),i=t(12),m=t(14),s=t(131),h=t(119),d=t(120),g=t(122),f=(t(74),t(107)),p=t(111),E=t(80),v=t(112),b=t(135),M=t(116),j=t(117),y=t(118),k=t(43),O=t.n(k);function G(e){var a=Object(n.useState)(""),t=Object(m.a)(a,2),l=t[0],c=t[1],o=Object(n.useState)(!0),u=Object(m.a)(o,2),i=u[0],s=u[1],h=function(){e.addHousehold(l),c(""),s(!0)};return r.a.createElement(f.a,{subheader:r.a.createElement(p.a,null,"Households")},r.a.createElement(E.a,null,r.a.createElement(v.a,null,r.a.createElement(b.a,{label:"Add Household",onChange:function(a){return function(a){c(a.target.value);var t=a.target.value.trim(),n=""===t||e.households.some((function(e){return e===t}))||void 0===t;s(n)}(a)},onKeyUp:function(a){return function(a){13===a.keyCode&&(""!==l&&!e.households.some((function(e){return e===l}))&&void 0!==l&&(a.preventDefault(),h()))}(a)},value:l})),r.a.createElement(M.a,null,r.a.createElement(j.a,{disabled:i,variant:"contained",color:"primary",onClick:h},"Add"))),e.households.filter((function(a){return a!==e.households[0]})).map((function(a){return r.a.createElement(E.a,{key:a},r.a.createElement(y.a,null,r.a.createElement(O.a,null)),r.a.createElement(v.a,{primary:a}),r.a.createElement(M.a,null,r.a.createElement(j.a,{fullWidth:!0,variant:"contained",color:"secondary",onClick:function(){return e.removeHousehold(a)}},"Remove")))})))}var S=t(121),C=t(123),A=t(124),H=t(125),P=t(126),x=t(127),w=t(115),N=t(137),V=t(132),R=t(128),I=t(129),W=t(55),B=t.n(W);function D(e){var a=Object(n.useState)({name:"",household:e.households[0],gender:e.genders[0],age:0}),t=Object(m.a)(a,2),l=t[0],c=t[1],o=Object(n.useState)(!0),u=Object(m.a)(o,2),s=u[0],f=u[1],p=function(){e.addPerson(l),c({name:"",household:e.households[0],gender:e.genders[0],age:0}),f(!0)};return r.a.createElement(h.a,null,r.a.createElement(d.a,{title:"People",action:r.a.createElement(S.a,null,r.a.createElement(B.a,{onClick:e.resetPeople}))}),r.a.createElement(g.a,null,r.a.createElement(C.a,null,r.a.createElement(A.a,null,r.a.createElement(H.a,null,r.a.createElement(P.a,null,r.a.createElement(x.a,{style:{width:"30%"}},r.a.createElement(w.a,{fullWidth:!0},r.a.createElement(b.a,{id:"personInputName",placeholder:"Name",label:"Name",value:l.name,onChange:function(a){return function(a){c(Object(i.a)({},l,{name:a.target.value}));var t=a.target.value.trim(),n=""===t||e.people.some((function(e){return e.name===t}))||void 0===t;f(n)}(a)},onKeyUp:function(a){return function(a){13===a.keyCode&&(""!==l.name&&!e.people.some((function(e){return e.name===l.name}))&&void 0!==l.name&&(a.preventDefault(),p()))}(a)}}))),r.a.createElement(x.a,null,r.a.createElement(w.a,{fullWidth:!0},r.a.createElement(N.a,null,"Household"),r.a.createElement(V.a,{id:"personInputHousehold",value:l.household,onChange:function(e){return function(e){var a=e.target.value;a.trim(),void 0!==a&&""!==a&&c(Object(i.a)({},l,{household:a}))}(e)}},e.households.map((function(e){return r.a.createElement(R.a,{key:e,value:e},e)}))))),r.a.createElement(x.a,null,r.a.createElement(w.a,{fullWidth:!0},r.a.createElement(N.a,null,"Gender"),r.a.createElement(V.a,{id:"personInputGender",value:l.gender,onChange:function(e){return function(e){var a=e.target.value;a.trim(),void 0!==a&&""!==a&&c(Object(i.a)({},l,{gender:a}))}(e)}},e.genders.map((function(e){return r.a.createElement(R.a,{key:e,value:e},e)}))))),r.a.createElement(x.a,{style:{width:"11%"}},r.a.createElement(w.a,{fullWidth:!0},r.a.createElement(b.a,{id:"personInputAge",type:"number",placeholder:"Age",label:"Age",value:l.age,inputProps:{min:"1"}}))),r.a.createElement(x.a,null,r.a.createElement(j.a,{fullWidth:!0,variant:"contained",color:"primary",onClick:p,disabled:s},"Add"))),r.a.createElement(P.a,null,r.a.createElement(x.a,null,"Name"),r.a.createElement(x.a,null,"Household"),r.a.createElement(x.a,null,"Gender"),r.a.createElement(x.a,null,"Age"),r.a.createElement(x.a,null))),r.a.createElement(I.a,null,e.people.map((function(a){return r.a.createElement(P.a,{key:a.name},r.a.createElement(x.a,null,a.name),r.a.createElement(x.a,null,a.household),r.a.createElement(x.a,null,a.gender),r.a.createElement(x.a,null,a.age>0?a.age:"None"),r.a.createElement(x.a,null,r.a.createElement(j.a,{fullWidth:!0,variant:"contained",color:"secondary",onClick:function(){return e.removePerson(a.name)}},"Remove")))})))))))}var J=t(138),K=t(58),U=t.n(K),F=t(56),T=t.n(F),q=t(57),z=t.n(q);function L(e){return r.a.createElement(f.a,{subheader:r.a.createElement(p.a,null,"Rules")},r.a.createElement(E.a,null,r.a.createElement(y.a,null,r.a.createElement(T.a,null)),r.a.createElement(v.a,{id:"switch-list-label-preventCircularGifting",primary:"Prevent Circular Gifting"}),r.a.createElement(M.a,null,r.a.createElement(J.a,{edge:"end",onChange:function(a){return e.changeRule("preventCircularGifting",a.target.checked)},checked:e.rules.preventCircularGifting}))),r.a.createElement(E.a,null,r.a.createElement(y.a,null,r.a.createElement(O.a,null)),r.a.createElement(v.a,{id:"switch-list-label-preventSameHousehold",primary:"Prevent Same Household"}),r.a.createElement(M.a,null,r.a.createElement(J.a,{edge:"end",onChange:function(a){return e.changeRule("preventSameHousehold",a.target.checked)},checked:e.rules.preventSameHousehold}))),r.a.createElement(E.a,null,r.a.createElement(y.a,null,r.a.createElement(z.a,null)),r.a.createElement(v.a,{id:"switch-list-label-preventSameGender",primary:"Prevent Same Gender"}),r.a.createElement(M.a,null,r.a.createElement(J.a,{edge:"end",onChange:function(a){return e.changeRule("preventSameGender",a.target.checked)},checked:e.rules.preventSameGender}))),r.a.createElement(E.a,null,r.a.createElement(y.a,null,r.a.createElement(U.a,null)),r.a.createElement(v.a,{id:"switch-list-label-preventSameAgeGroup",primary:"Prevent Same Age Group"}),r.a.createElement(M.a,null,r.a.createElement(J.a,{edge:"end",onChange:function(a){return e.changeRule("preventSameAgeGroup",a.target.checked)},checked:e.rules.preventSameAgeGroup}))))}var Q=t(134),X=t(130),Y=t(23),Z=t(59),$=t.n(Z);function _(e){return r.a.createElement(h.a,null,r.a.createElement(d.a,{title:"Matches",action:r.a.createElement(S.a,null,r.a.createElement($.a,{onClick:e.regenerateMatches}))}),e.areMatchesGenerating?r.a.createElement(Q.a,{justifyContent:"center"},r.a.createElement(X.a,null)):e.areMatchesValid?r.a.createElement(C.a,null,r.a.createElement(A.a,null,r.a.createElement(H.a,null,r.a.createElement(P.a,null,r.a.createElement(x.a,null,"Gifter"),r.a.createElement(x.a,null,"Giftee"))),r.a.createElement(I.a,null,e.matches.map((function(e,a){return r.a.createElement(P.a,{key:a},r.a.createElement(x.a,null,e.gifter.name),r.a.createElement(x.a,null,e.giftee.name))}))))):r.a.createElement(Q.a,{textAlign:"center",m:3},r.a.createElement(Y.a,null,e.matchesMessage)))}var ee=t(42),ae=t(21),te=function(){function e(a){Object(ee.a)(this,e),this.genders=void 0,this.genders=a}return Object(ae.a)(e,[{key:"generateMatches",value:function(e,a){for(var t=[],n=0;n<e.length;n++)for(var r=e[n],l=0;l<e.length;l++){var c=e[l];if(a[n][l]>0&&a[l][n]>0){t.push({gifter:r,giftee:c}),a[n][l]=0,a[l][n]=0;for(var o=0;o<a[n].length;o++)a[n][o]=0,a[o][n]=0}}if(t.length<e.length){var u=e[e.length-1],i=e[0];t.push({gifter:u,giftee:i})}return t}},{key:"areMatchesValid",value:function(e,a,t,n){var r=this,l=!0;if(a.length!==e)l=!1;else for(var c=function(e){var c=a[e];return c.gifter.name===c.giftee.name?(l=!1,"break"):a.filter((function(e){return e.gifter.name===c.gifter.name})).length>1?(l=!1,"break"):a.filter((function(e){return e.giftee.name===c.giftee.name})).length>1?(l=!1,"break"):(n.preventCircularGifting,(!n.preventSameHousehold||c.gifter.household===t[0]&&c.giftee.household===t[0]||c.gifter.household!==c.giftee.household)&&(!n.preventSameGender||c.gifter.gender===r.genders[0]&&c.giftee.gender===r.genders[0]||c.gifter.gender!==c.giftee.gender)?void n.preventSameAgeGroup:(l=!1,"break"))},o=0;o<a.length;o++){if("break"===c(o))break}return l}},{key:"buildAdjacencyMatrix",value:function(e,a,t){for(var n=[],r=0;r<e.length;r++){n.push([]);for(var l=0;l<e.length;l++)n[r].push(0)}for(var c=0;c<e.length;c++)for(var o=e[c],u=0;u<e.length;u++){var i=e[u],m=!0;o.name===i.name&&(m=!1),t.preventCircularGifting,t.preventSameHousehold&&(o.household===a[0]&&i.household===a[0]||o.household===i.household&&(m=!1)),t.preventSameGender&&(o.gender===this.genders[0]&&i.gender===this.genders[0]||o.gender===i.gender&&(m=!1)),t.preventSameAgeGroup,m&&(n[c][u]++,n[u][c]++)}return n}},{key:"shufflePeople",value:function(e){for(var a=Object(o.a)(e),t=a.length-1;t>0;t--){var n=Math.floor(Math.random()*(t+1)),r=[a[n],a[t]];a[t]=r[0],a[n]=r[1]}return a}},{key:"bipartiteMatching",value:function(e,a,t,n,r,l){for(var c=0;c<a;c++)if(t[n][c]>0&&!r[c]&&(r[c]=!0,l[c]<0||this.bipartiteMatching(e,a,t,l[c],r,l)))return l[c]=n,!0;return!1}},{key:"maximumBipartiteMatching",value:function(e,a,t){for(var n=Array(t),r=0;r<t;++r)n[r]=-1;for(var l=0,c=0;c<a;c++){for(var o=Array(t),u=0;u<t;++u)o[u]=!1;this.bipartiteMatching(a,t,e,c,o,n)&&l++}return l}}]),e}();c.a.render(r.a.createElement((function(){var e=["None","Male","Female","Other"],a=new te(e),t=Object(n.useState)({rules:{preventCircularGifting:!1,preventSameHousehold:!1,preventSameGender:!1,preventSameAgeGroup:!1},people:[],households:["None"],matches:[],areMatchesGenerating:!1,areMatchesValid:!1,matchesMessage:""}),l=Object(m.a)(t,2),c=l[0],f=l[1],p=function(){if(c.people.length<2)f(Object(i.a)({},c,{areMatchesValid:!1,matchesMessage:"Add 2 or more people to start matching."}));else{f(Object(i.a)({},c,{areMatchesGenerating:!0}));var e=a.shufflePeople(c.people),t=a.buildAdjacencyMatrix(e,c.households,c.rules);if(a.maximumBipartiteMatching(t,c.people.length,c.people.length)===c.people.length){for(var n=a.generateMatches(e,t);!a.areMatchesValid(c.people.length,n,c.households,c.rules);)e=a.shufflePeople(c.people),t=a.buildAdjacencyMatrix(e,c.households,c.rules),n=a.generateMatches(e,t);n.sort((function(e,a){return e.gifter.name.localeCompare(a.gifter.name)})),f(Object(i.a)({},c,{matches:n,areMatchesGenerating:!1,areMatchesValid:!0}))}else f(Object(i.a)({},c,{matches:[],areMatchesGenerating:!1,areMatchesValid:!1,matchesMessage:"No matches could be made with your current settings. Try changing something."}))}};return Object(n.useEffect)(p,[c.people,c.households,c.rules]),r.a.createElement("div",{className:"app"},r.a.createElement(s.a,{container:!0,spacing:3},r.a.createElement(s.a,{item:!0,xs:12,md:3},r.a.createElement(h.a,null,r.a.createElement(d.a,{title:"Setup"}),r.a.createElement(g.a,null,r.a.createElement(L,{rules:c.rules,changeRule:function(e,a){f(Object(i.a)({},c,{rules:Object(i.a)({},c.rules,Object(u.a)({},e,a))}))}}),r.a.createElement(G,{households:c.households,addHousehold:function(e){e.trim(),void 0!==e&&""!==e&&!c.households.includes(e)&&f(Object(i.a)({},c,{households:[].concat(Object(o.a)(c.households),[e])}))},removeHousehold:function(e){var a=c.households.findIndex((function(a){return a===e}));0!==a&&void 0!==c.households[a]&&(c.people.filter((function(e){return e.household===c.households[a]})).forEach((function(e){e.household=c.households[0]})),c.households.splice(a,1),f(Object(i.a)({},c,{people:Object(o.a)(c.people),households:Object(o.a)(c.households)})))}})))),r.a.createElement(s.a,{item:!0,xs:12,md:6},r.a.createElement(D,{people:c.people,households:c.households,genders:e,addPerson:function(e){var a,t;e.name.trim(),null===(a=e.household)||void 0===a||a.trim(),null===(t=e.gender)||void 0===t||t.trim(),void 0!==e.name&&""!==e.name&&!c.people.some((function(a){return a.name===e.name}))&&f(Object(i.a)({},c,{people:[].concat(Object(o.a)(c.people),[e])}))},removePerson:function(e){var a=c.people.findIndex((function(a){return a.name===e}));void 0!==c.people[a]&&(c.people.splice(a,1),f(Object(i.a)({},c,{people:Object(o.a)(c.people)})))},resetPeople:function(){f(Object(i.a)({},c,{people:[]}))}})),r.a.createElement(s.a,{item:!0,xs:12,md:3},r.a.createElement(_,{matches:c.matches,areMatchesGenerating:c.areMatchesGenerating,areMatchesValid:c.areMatchesValid,matchesMessage:c.matchesMessage,regenerateMatches:p}))))}),null),document.getElementById("root"))}},[[69,1,2]]]);
//# sourceMappingURL=main.7d206c69.chunk.js.map